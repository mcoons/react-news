(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,a){e.exports=a(20)},16:function(e,t,a){},18:function(e,t,a){},20:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(9),c=a.n(r),o=(a(16),a(2)),l=a(3),i=a(5),u=a(4),m=a(6),h=a(1),d=(a(18),function(e){var t=e.item;return s.a.createElement("div",{className:"col xs12 s12 m6 l3"},s.a.createElement("div",{className:"card medium"},s.a.createElement("div",{className:"card-image"},t.urlToImage?s.a.createElement("img",{src:t.urlToImage,alt:t.title}):s.a.createElement("img",{src:"./no-image-available.png",alt:t.title}),s.a.createElement("span",{className:"card-title"},t.source.name)),s.a.createElement("div",{className:"card-content"},s.a.createElement("p",null,t.title)),s.a.createElement("div",{className:"card-action"},s.a.createElement("a",{href:t.url,target:"_blank"},"Full Article"))))}),p=function(){return s.a.createElement("div",null,s.a.createElement("h3",null,"Error: No news using selected resources."))},f=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={news:[],error:!1,API_KEY:"a146a4f043014cd68498f5880be5eb8c"},a.fetchNews=a.fetchNews.bind(Object(h.a)(Object(h.a)(a))),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.fetchNews()}},{key:"fetchNews",value:function(){var e=this,t=[],a=[];if(this.props.news.query.replace("sources=","").split(",").forEach(function(e){var n=localStorage.getItem(e+"-timestamp");n?Date.now()-Number(n)>36e5?a.push(e):t=t.concat(JSON.parse(localStorage.getItem(e))):a.push(e)}),this.setState({news:t}),a.length>0){var n="sources="+a.join(","),s="https://newsapi.org/v2/".concat(this.props.news.type,"?").concat(n,"&pagesize=100&apiKey=").concat(this.state.API_KEY);fetch(s).then(function(e){return e.json()}).then(function(t){var n=t.articles.slice();a.forEach(function(e){localStorage.setItem(e+"-timestamp",Date.now()),localStorage.setItem(e,JSON.stringify(n.filter(function(t){return t.source.id===e})))}),e.setState({news:e.state.news.concat(t.articles)})}).catch(function(t){console.log(t),e.setState({error:!0})})}}},{key:"renderItems",value:function(){return this.state.error?s.a.createElement(p,null):this.state.news&&this.state.news.length?this.state.news.map(function(e){return s.a.createElement(d,{key:e.source.id+e.url,item:e})}):s.a.createElement(p,null)}},{key:"render",value:function(){return s.a.createElement("div",{className:"row flex"},this.renderItems())}}]),t}(n.Component),v=a(7),b=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state=Object(v.a)({},a.props.item.name,e.selectedSources.includes(a.props.item.id)),a.handleInputChange=a.handleInputChange.bind(Object(h.a)(Object(h.a)(a))),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"handleInputChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState(Object(v.a)({},n,a));var s=n.toLowerCase().split(" ").join("-");this.props.updateSourcesCallback({sourceID:s,value:a})}},{key:"render",value:function(){return s.a.createElement("div",{className:"source"},s.a.createElement("label",{htmlFor:this.props.item.name},s.a.createElement("input",{key:this.props.item.name,id:this.props.item.name,className:"checkbox",name:this.props.item.name,type:"checkbox",checked:this.state[this.props.item.name],onChange:this.handleInputChange}),this.props.item.name))}}]),t}(n.Component),w=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={sources:[],error:!1},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=new Request("./sourcesdata.json");fetch(t).then(function(e){return e.json()}).then(function(t){e.setState({sources:t.sources})}).catch(function(t){console.log(t),e.setState({error:!0})})}},{key:"renderItems",value:function(){var e=this;return this.state.error?s.a.createElement(p,null):this.state.sources.map(function(t){return s.a.createElement(b,{key:t.url,item:t,selectedSources:e.props.selectedSources,updateSourcesCallback:e.props.updateSourcesCallback})})}},{key:"render",value:function(){return s.a.createElement("div",{className:"row flex sources"},s.a.createElement("p",null,"Select Sources"),this.renderItems(),s.a.createElement("p",null,"Powered by NewsAPI.org"))}}]),t}(n.Component),g=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={news:{type:"top-headlines",query:"sources=abc-news,time"},selectedSources:["abc-news","time"]},a.updateSources=a.updateSources.bind(Object(h.a)(Object(h.a)(a))),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("selectedSources");e&&this.setState({selectedSources:JSON.parse(e),news:{type:"top-headlines",query:"sources="+JSON.parse(e).toString()}})}},{key:"updateSources",value:function(e){var t=this.state.selectedSources.slice();e.value?t.push(e.sourceID):t=t.filter(function(t){return t!==e.sourceID}),this.setState({selectedSources:t,news:{type:"top-headlines",query:"sources="+t.toString()}}),localStorage.setItem("selectedSources",JSON.stringify(t))}},{key:"render",value:function(){return s.a.createElement("div",{className:"container-fluid"},s.a.createElement("div",{className:"navbar-fixed"},s.a.createElement("nav",null,s.a.createElement("div",{className:"nav-wrapper indigo lighten-4"},s.a.createElement("a",{href:"/",className:"brand-logo center"},"News Feeds")))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col xs12 s9"},s.a.createElement(f,{key:this.state.news.query,news:this.state.news})),s.a.createElement("div",{className:"col xs12 s3"},s.a.createElement(w,{selectedSources:this.state.selectedSources,updateSourcesCallback:this.updateSources}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(s.a.createElement(g,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[10,2,1]]]);
//# sourceMappingURL=main.4c9bb8bc.chunk.js.map